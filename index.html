<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eid Mubarak! - Festive Greetings</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');

        :root {
            --primary-color: #FFC107; /* Brighter Gold */
            --secondary-color: #FF9800; /* Vibrant Orange */
            --accent-color: #4CAF50; 
            --text-color: #f0f4f8; 
            --bg-dark1: #0a0c0f; 
            --bg-dark2: #101418; 
            --bg-dark3: #161a1e; 
            --glass-bg: rgba(30, 35, 45, 0.65); 
            --glass-border: rgba(255, 255, 255, 0.08);
            --input-bg: rgba(255, 255, 255, 0.05);
            --input-border-focus: var(--primary-color);
            --whatsapp-green: #25D366;
            --whatsapp-green-hover: #1DA851;
            --button-glow: rgba(255, 193, 7, 0.3);
            --shadow-color-light: rgba(255, 255, 255, 0.05);
            --shadow-color-dark: rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden; /* Prevent horizontal scroll globally */
        }

        body {
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(145deg, var(--bg-dark1) 0%, var(--bg-dark2) 50%, var(--bg-dark3) 100%);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 15px 10px;
            overflow-x: hidden; /* Reinforce no horizontal scroll on body */
            /* overflow-y: auto; /* Allow vertical scroll if content exceeds viewport */
        }

        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; 
            pointer-events: none; 
        }

        .ad-banner {
            width: 100%;
            max-width: 728px; 
            min-height: 90px; 
            margin: 0 auto 20px auto; 
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1; 
            overflow: hidden; /* CRITICAL: Clip ad content if it's too wide */
        }
        .ad-banner-top {
            margin-bottom: 25px;
        }
        .ad-banner-bottom {
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 28px; 
            padding: 30px 35px;
            max-width: 500px; 
            width: 100%;
            box-shadow: 0 0 10px var(--shadow-color-light) inset, 0 15px 50px var(--shadow-color-dark);
            border: 1px solid var(--glass-border);
            text-align: center;
            animation: fadeInContainer 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
            z-index: 10; 
            position: relative; 
        }
        
        @keyframes fadeInContainer {
            from { opacity: 0; transform: translateY(50px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        #eidGif {
            max-width: clamp(180px, 60%, 280px); 
            height: auto;
            border-radius: 20px;
            margin-bottom: 25px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.35);
            border: 1px solid rgba(255,255,255,0.1);
        }

        #greetingText {
            font-size: clamp(1.7rem, 5.5vw, 2.1rem);
            font-weight: 700; 
            background: linear-gradient(60deg, var(--primary-color), var(--secondary-color), #FF6F00);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-fill-color: transparent;
            text-shadow: 0 1px 1px rgba(0,0,0,0.2), 
                         0 0 12px rgba(255, 200, 80, 0.55), 
                         0 0 22px rgba(255, 152, 0, 0.4);
            margin-bottom: 30px;
            line-height: 1.35;
            animation: fadeInText 1.2s ease-in-out 0.3s forwards;
            opacity: 0;
        }

        @keyframes fadeInText {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #nameInput {
            width: 100%;
            padding: 16px 18px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            background: var(--input-bg);
            color: var(--text-color);
            font-size: 1.05em;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2) inset;
        }

        #nameInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        #nameInput:focus {
            border-color: var(--input-border-focus);
            background-color: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 12px rgba(255, 193, 7, 0.3), 0 2px 5px rgba(0,0,0,0.1) inset;
        }

        .button {
            padding: 14px 28px;
            border-radius: 30px; 
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin-top: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.8px;
            -webkit-tap-highlight-color: transparent;
            border: none; 
        }
        
        #generateButton {
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            color: #202020; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 2px 8px var(--button-glow);
            animation: pulseShadow 2.5s infinite ease-in-out;
        }
        
        #generateButton:hover, #generateButton:focus {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3), 0 4px 12px var(--button-glow);
            animation-play-state: paused;
            outline: none;
        }
        #generateButton::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.6s ease;
        }
        #generateButton:hover::before, #generateButton:focus::before {
            left: 100%;
        }


        @keyframes pulseShadow {
            0% { box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 2px 8px var(--button-glow); }
            50% { box-shadow: 0 4px 18px rgba(0,0,0,0.25), 0 2px 12px rgba(255,193,7,0.45); }
            100% { box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 2px 8px var(--button-glow); }
        }

        #customMessageContainer {
            margin-top: 30px;
            padding: 20px 25px;
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            color: #e8e8e8;
            font-size: 1.1em;
            line-height: 1.65;
            animation: fadeInMessage 0.6s ease-out;
            border: 1px solid rgba(255,255,255,0.1);
        }

        @keyframes fadeInMessage {
            from { opacity: 0; transform: scale(0.92); }
            to { opacity: 1; transform: scale(1); }
        }

        #customMessageText {
            margin-bottom: 20px;
            word-break: break-word;
        }

        #whatsappShareButton {
            background-color: var(--whatsapp-green);
            color: #fff;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.25);
        }

        #whatsappShareButton svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        #whatsappShareButton:hover, #whatsappShareButton:focus {
            background-color: var(--whatsapp-green-hover);
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 6px 18px rgba(37, 211, 102, 0.35);
            outline: none;
        }

        .audio-controls-wrapper { 
            width: 100%;
            max-width: 480px; 
            margin-top: 25px;
            text-align: center;
            z-index: 5; 
            position: relative; 
        }

        #muteButton {
            padding: 12px 25px;
            font-size: 0.95em;
            background-color: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: var(--text-color);
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
            -webkit-tap-highlight-color: transparent;
        }

        #muteButton:hover, #muteButton:focus {
            background-color: rgba(255,255,255,0.2);
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(255,255,255,0.1);
            outline: none;
        }
        
        @media (max-width: 520px) {
            .container {
                padding: 25px 20px; 
            }
            #greetingText {
                font-size: clamp(1.5rem, 5vw, 1.9rem);
            }
            .button {
                padding: 12px 22px;
                font-size: 0.95em;
            }
            #eidGif {
                 max-width: clamp(150px, 55%, 240px);
            }
        }
        @media (max-width: 380px) {
            #greetingText {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <canvas id="fireworksCanvas"></canvas>

    <div class="ad-banner ad-banner-top">
        <script type="text/javascript">
            atOptions = {
                'key' : 'd5b6f139b0068b0677e169da3deeb0af',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/d5b6f139b0068b0677e169da3deeb0af/invoke.js"></script>
    </div>

    <div class="container">
        <img src="eid.gif" alt="Eid Mubarak Celebration" id="eidGif">
        
        <h1 id="greetingText">â€Ž â€Ž â€Ž â€Ž â€Ž â€Žâ€Ž â€Ž â€Ž  âœ¨ Eid Mubarakâœ¨ â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž â€Ž May this Eid bring joy, peace, and prosperity to all! âœ¨</h1>
        
        <input type="text" id="nameInput" placeholder="Enter your name">
        
        <button id="generateButton" class="button">
            Generate Eid Wish
        </button>
        
        <div id="customMessageContainer" style="display: none;">
            <p id="customMessageText"></p>
            <button id="whatsappShareButton" class="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="width: 1em; height: 1em; vertical-align: middle; margin-right: 6px;">
                    <path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.5-7c-18.9-29.7-28.9-63.3-28.9-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
                </svg>
                Share on WhatsApp
            </button>
        </div>
    </div>

    <div class="audio-controls-wrapper">
        <audio id="backgroundMusic" src="song.mp3" autoplay loop></audio>
        <button id="muteButton">Play Music</button>
    </div>

    <div class="ad-banner ad-banner-bottom">
        <script type="text/javascript">
            atOptions = {
                'key' : 'd5b6f139b0068b0677e169da3deeb0af',
                'format' : 'iframe',
                'height' : 90,
                'width' : 728,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/d5b6f139b0068b0677e169da3deeb0af/invoke.js"></script>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('nameInput');
            const generateButton = document.getElementById('generateButton');
            const customMessageContainer = document.getElementById('customMessageContainer');
            const customMessageText = document.getElementById('customMessageText');
            const whatsappShareButton = document.getElementById('whatsappShareButton');
            
            const audio = document.getElementById('backgroundMusic');
            const muteButton = document.getElementById('muteButton');

            audio.volume = 0.3;
            let hasUserInteracted = false;

            function updateMuteButtonText() {
                if (audio.paused && !audio.ended) {
                    muteButton.textContent = 'Play Music';
                } else if (audio.muted) {
                    muteButton.textContent = 'Unmute Music';
                } else {
                    muteButton.textContent = 'Mute Music';
                }
            }

            var playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    audio.muted = false; 
                    updateMuteButtonText();
                }).catch(error => {
                    console.log("Autoplay prevented. User interaction needed or click 'Play Music'.");
                    updateMuteButtonText(); 
                });
            } else {
                setTimeout(updateMuteButtonText, 100);
            }
            
            audio.onplay = () => { hasUserInteracted = true; updateMuteButtonText(); };
            audio.onpause = updateMuteButtonText;
            audio.onvolumechange = () => { if (!audio.paused) updateMuteButtonText(); };

            muteButton.addEventListener('click', () => {
                hasUserInteracted = true;
                if (audio.paused) {
                    audio.play().then(() => {
                        audio.muted = false;
                        updateMuteButtonText();
                    }).catch(error => console.error("Manual play failed:", error));
                } else {
                    audio.muted = !audio.muted;
                    updateMuteButtonText();
                }
            });
            
            generateButton.addEventListener('click', () => {
                if (!hasUserInteracted && audio.paused) {
                    audio.play().then(() => {
                        audio.muted = false;
                        updateMuteButtonText();
                    }).catch(error => console.log("Audio play attempt on generate click failed:", error));
                }
                hasUserInteracted = true;

                const name = nameInput.value.trim();
                const userName = name ? name : "A Friend";
                const message = `Eid Mubarak from ${userName}! ðŸŽ‰ Wishing you a joyous Eid filled with happiness, peace, and countless blessings!`;
                
                customMessageText.textContent = message;
                customMessageContainer.style.display = 'block';
            });

            whatsappShareButton.addEventListener('click', () => {
                const messageToShare = customMessageText.textContent;
                if (!messageToShare) {
                    alert("Please generate a message first!");
                    return;
                }
                const siteUrl = window.location.href;
                const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(messageToShare + "\n\nCheck out this Eid Greeting: " + siteUrl)}`;
                
                window.open(whatsappUrl, '_blank');
            });

            // --- Fireworks ---
            const fireworksCanvas = document.getElementById('fireworksCanvas');
            const ctx = fireworksCanvas.getContext('2d');
            let fireworks = [];
            let particles = [];
            const numParticles = 50; 
            const gravity = 0.08;
            const friction = 0.98;
            const launchInterval = 1000; 
            let lastLaunch = 0;

            function setCanvasSize() {
                fireworksCanvas.width = window.innerWidth;
                fireworksCanvas.height = window.innerHeight;
            }
            setCanvasSize();
            window.addEventListener('resize', setCanvasSize);

            function random(min, max) {
                return Math.random() * (max - min) + min;
            }

            class Firework {
                constructor() {
                    this.x = random(fireworksCanvas.width * 0.2, fireworksCanvas.width * 0.8);
                    this.y = fireworksCanvas.height;
                    this.targetY = random(fireworksCanvas.height * 0.1, fireworksCanvas.height * 0.4);
                    this.hue = random(0, 360);
                    this.alpha = 1;
                    this.speed = random(2, 4);
                    this.angle = -Math.PI / 2; 
                    this.vx = Math.cos(this.angle) * this.speed;
                    this.vy = Math.sin(this.angle) * this.speed;
                    this.trail = [];
                    this.trailLength = 3;
                }

                update() {
                    this.trail.push({ x: this.x, y: this.y });
                    if (this.trail.length > this.trailLength) {
                        this.trail.shift();
                    }

                    this.x += this.vx;
                    this.y += this.vy;
                    this.alpha -= 0.005; 

                    if (this.y <= this.targetY || this.alpha <= 0) {
                        this.explode();
                        return true; 
                    }
                    return false;
                }

                draw() {
                    ctx.beginPath();
                    ctx.moveTo(this.trail[0]?.x || this.x, this.trail[0]?.y || this.y);
                    for(let i=1; i<this.trail.length; i++){
                        ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    }
                    ctx.strokeStyle = `hsla(${this.hue}, 100%, 70%, ${this.alpha * 0.7})`;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    ctx.fillStyle = `hsla(${this.hue}, 100%, 70%, ${this.alpha})`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                }

                explode() {
                    for (let i = 0; i < numParticles; i++) {
                        particles.push(new Particle(this.x, this.y, this.hue));
                    }
                }
            }

            class Particle {
                constructor(x, y, hue) {
                    this.x = x;
                    this.y = y;
                    this.hue = hue + random(-20, 20); 
                    this.size = random(1, 3);
                    this.alpha = 1;
                    this.speed = random(1, 5);
                    this.angle = random(0, Math.PI * 2);
                    this.vx = Math.cos(this.angle) * this.speed;
                    this.vy = Math.sin(this.angle) * this.speed;
                    this.lifespan = random(40, 80); 
                    this.trail = [];
                    this.trailLength = 5;
                }

                update() {
                    this.trail.push({ x: this.x, y: this.y, alpha: this.alpha });
                    if (this.trail.length > this.trailLength) {
                        this.trail.shift();
                    }

                    this.vx *= friction;
                    this.vy *= friction;
                    this.vy += gravity;
                    this.x += this.vx;
                    this.y += this.vy;
                    this.alpha -= 0.02; 
                    this.lifespan--;

                    return this.alpha <= 0 || this.lifespan <= 0; 
                }

                draw() {
                    ctx.beginPath();
                    const lastTrailPoint = this.trail[0] || { x: this.x, y: this.y, alpha: this.alpha };
                    ctx.moveTo(lastTrailPoint.x, lastTrailPoint.y);
                     for (let i = 1; i < this.trail.length; i++) {
                        ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    }
                    ctx.strokeStyle = `hsla(${this.hue}, 100%, 60%, ${this.alpha * 0.5})`;
                    ctx.lineWidth = this.size * 0.8; 
                    ctx.stroke();

                    ctx.fillStyle = `hsla(${this.hue}, 100%, 70%, ${this.alpha})`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            function animateFireworks(timestamp) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.12)'; 
                ctx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);

                if (timestamp - lastLaunch > launchInterval) {
                    if (fireworks.length < 5) { 
                         fireworks.push(new Firework());
                    }
                    lastLaunch = timestamp;
                }

                for (let i = fireworks.length - 1; i >= 0; i--) {
                    if (fireworks[i].update()) {
                        fireworks.splice(i, 1); 
                    } else {
                        fireworks[i].draw();
                    }
                }

                for (let i = particles.length - 1; i >= 0; i--) {
                    if (particles[i].update()) {
                        particles.splice(i, 1); 
                    } else {
                        particles[i].draw();
                    }
                }
                requestAnimationFrame(animateFireworks);
            }
            requestAnimationFrame(animateFireworks); 
        });
    </script>
</body>
</html>